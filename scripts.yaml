#Trigger the Hue lights scene for movie watching
set_movie_lighting:
  sequence:
  - service: hue.hue_activate_scene
    data: 
      group_name: "Theatre Room"
      scene_name: "Movie Watching"
  - service: light.turn_off
    data:
      entity_id: light.entry_hall_lights
  - service: light.turn_off
    data: 
      entity_id: light.theatre_room_ceiling
  alias: Movie Lighting Scene
  

#Get the theatre room ready  
time_for_a_movie:
  alias: Time For A Movie
  sequence:
    - service: script.turn_on #set the lighting
      entity_id:
        - script.set_movie_lighting 
    - service: media_player.turn_on #turn on the TV
      entity_id:
        - media_player.theatre_room_tv 
    - delay: #wait for the tv to switch on
        seconds: 10
    - service: media_player.select_source #switch TV to netflix
      data:
        entity_id: media_player.theatre_room_tv
        source: "Netflix"

#Finished with the theatre room  
done_with_the_theatre_room:
  alias: Done With The Theatre Room
  sequence:
    - service: media_player.turn_off #turn on the TV
      entity_id:
        - media_player.theatre_room_tv 
    - service: light.turn_off
      entity_id:
        - light.theatre_room_left_lamp
        - light.theatre_room_right_lamp
        - light.theatre_room_ceiling

#Play a particular Google Play Music playlsit on all rooms. Triggered by multiple different Lovelace buttons. 
play_playlist_on_all_rooms:
  alias: Play playlist on all rooms
  sequence:
    - service: media_player.turn_off
      entity_id: media_player.gmusic_player
    - service: input_select.select_option
      data: 
        option: all_rooms #this is a hardcoded value which hopefully won't ever change :)
        entity_id: input_select.gmusic_player_speakers
    - service: input_select.select_option
      data_template:
        option: "{{ playlist }}" #this will be provided by the UI button which triggers this script
        entity_id: input_select.gmusic_player_playlist
    - service: media_player.turn_on
      entity_id: media_player.gmusic_player
      
roomba_clean:
  alias: Roomba - Clean House
  sequence: 
    - data:
        entity_id: switch.roomba
      service: switch.turn_on

roomba_return_to_dock:
  alias: Roomba - Return To Dock
  sequence: 
    - data:
        entity_id: switch.roomba
      service: switch.turn_off
    - data:
        entity_id: switch.roomba
      service: switch.turn_off
    - data:
        entity_id: switch.roomba
      service: switch.turn_off
    - delay:
        seconds: 5
    - data:
        entity_id: switch.roomba
      service: switch.turn_off
    - data:
        entity_id: switch.roomba
      service: switch.turn_off
    - data:
        entity_id: switch.roomba
      service: switch.turn_off